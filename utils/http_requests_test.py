# -*- coding: utf-8 -*-
"""
 @Time    : 19/11/22 15:53
 @Author  : CyanZoy
 @File    : http_requests.py
 @Software: PyCharm
 @Describe: 
 """
import datetime
import json
import os

import django
import requests
from lxml.html import html_parser

from spider.bus.info import User_Agent
from lxml import etree

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "Blog.settings")
django.setup()
from bus.models import BusInfo


def fetch_html(url, method="GET", data=None, headers=None, charset='gbk'):
    """
    :param url:
    :param method:
    :param data:
    :param headers:
    :param charset:
    :return:
    """
    if not headers:
        headers = {
            "User_Agent": User_Agent,
        }

    assert method in ['GET', "POST"]
    content = None
    if method.lower() == "get":
        content = requests.get(url=url, headers=headers).content.decode(charset)
    if method.lower() == "post":
        content = requests.post(url=url, params=data, headers=headers).content.decode(charset)
    return content


def recursion(element):
    """递归解析元素 本规则只适用于此类型页面http://bm.eyuyao.com/bus/type/ChengQuGongJiao.html"""
    p = []
    if hasattr(element, 'getchildren') and element.getchildren():
        if element.tag == 'table' and element.attrib['width'] not in ['850', '815']:
            return
        if element.getchildren()[0].tag == 'br' and element.text:
            p.append(element.text)
        for i in element.getchildren():
            # 进行递归解析
            tem = recursion(i)
            if tem:
                p.append(tem)
    else:
        # 没有子元素, 开始解析
        if element.tag == 'a':
            return element.xpath("./@href"), element.text
        if element.tag == 'td':
            text = element.text
            if text:
                return text.replace("\xa0", "")
            else:
                return text
        if element.tag == 'span':
            return element.text
        if element.tag == 'b':
            return element.text
    return p if p else None


if __name__ == '__main__':
    data = [['33080506.html', '第一章 我不想再当废物了'], ['33080507.html', '第二章 她活不过十二点'], ['33080508.html', '第三章 对不起，我不救'], ['33080509.html', '第四章 谁说你母亲死了？'], ['33080510.html', '第五章 苏家完了'], ['33080511.html', '第六章 替罪羔羊 求收藏'], ['33080512.html', '第七章 你是林老师？ 求收藏'], ['33080513.html', '第八章 林阳，这都是你的错！ 求收藏'], ['33080514.html', '第九章 从今往后我不再欠你分毫 求收藏'], ['33080515.html', '第十章 徐家有请 求收藏'], ['33080516.html', '第十一章 他就是林神医 求收藏'], ['33080517.html', '第十二章 你去酒店炒菜吧 求收藏'], ['33080518.html', '第十三章 决裂'], ['33080519.html', '第十四章 人命关天 求收藏'], ['33080520.html', '第十五章 坐轮椅的小女孩'], ['33080521.html', '第十六章 你是怎么办到的？ 求收藏'], ['33080522.html', '第十七章 最后通牒'], ['33080523.html', '第十八章 赔偿'], ['33080524.html', '第十九章 林神医'], ['33080525.html', '第二十章 真正的林阳'], ['33080526.html', '第二十一章 唯一股东'], ['33080527.html', '第二十二章 满堂惊绝，无人不知我'], ['33080528.html', '第二十三章 一不做二不休 求订阅'], ['33080529.html', '第二十四章 男人的嘴，骗人的鬼'], ['33080530.html', '第二十五章 固执的苏家 第一更'], ['33080531.html', '第二十六章 这药是假的 第二更'], ['33080532.html', '第二十七章 这些人还有救 第三更'], ['33080533.html', '第二十八章 神医！力挽狂澜 第四更'], ['33080534.html', '第二十九章 我当场把这辆卡宴吃掉！ 第一更'], ['33080535.html', '第三十章 你不如我 第二更'], ['33080536.html', '第三十一章 中医界危机 第三更'], ['33080537.html', '第三十二章 震惊的安娜 第四更'], ['33080538.html', '第三十三章 拜师 第一更'], ['33080539.html', '第三十四章 一个惹过我的人 第二更'], ['33080540.html', '第三十五章 摊牌 第三更'], ['33080541.html', '第三十六章 震惊的苏家人 第四更'], ['33080542.html', '第三十七章 洛北明出事 第一更'], ['33080543.html', '第三十八章 中医告急 第二更'], ['33080544.html', '第三十九章 不退，我的背后空无一人！ 第三更'], ['33080545.html', '第四十章 中医，我来救！ 第四更'], ['33080546.html', '第四十一章 最拙劣的激将法 第一更'], ['33080547.html', '第四十二章 惊艳全场 第二更'], ['33080548.html', '第四十三章 鬼谷十三针 第三更'], ['33080549.html', '第四十四章 真正的医神！ 第四更'], ['33080550.html', '第四十五章 古怪的苏颜 第一更'], ['33080551.html', '第四十六章 私人宴会？ 第二更'], ['33080552.html', '第四十七章 谁给你的勇气？ 第三更'], ['33080553.html', '第四十八章 请先生原谅我 第四更'], ['33080554.html', '第四十九章 楚少的绝望 第一更'], ['33080555.html', '第五十章 愤怒 第二更'], ['33080556.html', '第五十一章 因为你们得罪了林神医 第三更'], ['33080557.html', '第五十二章 这个人是不是你 第四更'], ['33080558.html', '第五十三章 被人整了 第一更'], ['33080559.html', '第五十四章 让你关门 第二更'], ['33080560.html', '第五十五章 苏家的报复 第三更'], ['33080561.html', '第五十六章 我要他们万劫不复 第四更'], ['33080562.html', '第五十七章 我是来毁了苏家的 第一更'], ['33080563.html', '第五十八章 家破人亡？ 第二更'], ['33080564.html', '第五十九章 杀手锏 第三更'], ['33080565.html', '第六十章 你还有一天时间 第四更'], ['33080566.html', '第六十一章 这会是巧合？ 第一更'], ['33080567.html', '第六十二章 林阳来了 第二更'], ['33080568.html', '第六十三章 我等你们 第三更'], ['33080569.html', '第六十四章 他们完了 第四更'], ['33080570.html', '第六十五章 老同学来了'], ['33080571.html', '第六十六章 律师函'], ['33080572.html', '第六十七章 两千万的委托'], ['33080573.html', '第六十八章 阳华败局？'], ['33080574.html', '第六十九章 我是你的雇主'], ['33080575.html', '第七十章 根本不是同一张'], ['33080576.html', '第七十一章 林董现身'], ['33080577.html', '第七十二章 奇迹'], ['33080578.html', '第七十三章 江城震动'], ['33080579.html', '第七十四章 我再给你一次机会'], ['33080580.html', '第七十五章 我家的确没有奔驰'], ['33080581.html', '第七十六章 我去找他'], ['33080582.html', '第七十七章 你不配'], ['33080583.html', '第七十八章 失之交臂'], ['33080584.html', '第七十九章 天才医生'], ['33080585.html', '第八十章 你是谁？'], ['33080586.html', '第八十一章 不受待见'], ['33080587.html', '第八十二章 这也叫有钱吗？'], ['33080588.html', '第八十三章 相信我'], ['33080589.html', '第八十四章 秒变富豪'], ['33080590.html', '第八十五章 盆满钵满'], ['33080591.html', '第八十六章 马上把钱还回去'], ['33080592.html', '第八十七章 真迹与赝品'], ['33080593.html', '第八十八章 示众'], ['33080594.html', '第八十九章 退还'], ['33080595.html', '第九十章 把他们轰出去'], ['33080596.html', '第九十一章 江城来人'], ['33080597.html', '第九十二章 江城大佬'], ['33080598.html', '第九十三章 频频登场'], ['33080599.html', '第九十四章 这个寿宴，我陪你过完！'], ['33080600.html', '第九十五章 断绝关系'], ['33080601.html', '第九十六章 我看谁敢叫她跪'], ['33080602.html', '第九十七章 燕京夏家'], ['33080603.html', '第九十八章 清算'], ['33080604.html', '第九十九章 被警告'], ['33080605.html', '第一百章 夏家的忌惮'], ['33080606.html', '第一百零一章 离婚'], ['33080607.html', '第一百零二章 洛芊的男人'], ['33080608.html', '第一百零三章 你输了'], ['33080609.html', '第一百零四章 林阳的愤怒'], ['33080610.html', '第一百零五章 人渣'], ['33080611.html', '第一百零六章 拖出去'], ['33080612.html', '第一百零七章 没地方搁就不要了'], ['33080613.html', '第一百零八章 没有后悔药'], ['33080614.html', '第一百零九章 我想请您救个人'], ['33080615.html', '第一百一十章 最强大的律师团'], ['33080616.html', '第一百一十一章 我帮你拿下江城'], ['33080617.html', '第一百一十二章 江大宴会'], ['33080618.html', '第一百一十三章 我没有病'], ['33080619.html', '第一百一十四章 徐天被抓'], ['33080620.html', '第一百一十五章 现在能理解我的话了吗？'], ['33090233.html', '第一百一十六章 龙之吻'], ['33090234.html', '第一百一十七章 瘫痪'], ['33090235.html', '第一百一十八章 你的机会只有一次'], ['33095417.html', '第一百一十九章 敲山震虎'], ['33095418.html', '第一百二十章 万劫不复的会议'], ['33095516.html', '第一百二十一章 狮子大开口'], ['33095517.html', '第一百二十二章 我没说要娶苏颜！'], ['33095518.html', '第一百二十三章 滚！'], ['33105031.html', '第一百二十四章 我去见一个人'], ['33105319.html', '第一百二十五章 战神'], ['33105320.html', '第一百二十六章 被人堵了'], ['33105666.html', '第一百二十七章 走一趟'], ['33112174.html', '第一百二十八章 三大律师团'], ['33112175.html', '第一百二十九章 我，登峰造极'], ['33112593.html', '第一百三十章 愤怒'], ['33113082.html', '第一百三十一章 我想看你们待会的表情'], ['33114522.html', '第一百三十二章 你不会进这个大门'], ['33128648.html', '第一百三十三章 我的手段如何？'], ['33128649.html', '第一百三十四章 我没打算赢'], ['33128650.html', '第一百三十五章 毕竟你是我老婆'], ['33129171.html', '第一百三十六章 林先生'], ['33135665.html', '第一百三十七章 我给过你机会了'], ['33135666.html', '第一百三十八章 后悔了吗？'], ['33135667.html', '第一百三十九章 请您离开'], ['33142526.html', '第一百四十章 出事了'], ['33144387.html', '第一百四十一章 四百万'], ['33150015.html', '第一百四十二章 失败'], ['33155919.html', '第一百四十三章 不喜欢隔夜仇'], ['33157652.html', '第一百四十四章 警告'], ['33179739.html', '第一百四十五章 手术失败'], ['33179741.html', '第一百四十六章 我不准你出手！'], ['33183572.html', '第一百四十七章 我去请林神医'], ['33183828.html', '第一百四十八章 拦截林神医'], ['33187895.html', '第一百四十九章 好戏上演'], ['33187896.html', '第一百五十章 敬酒不吃吃罚酒'], ['33188054.html', '第一百五十一章 你以为我是华满晨请来的？'], ['33199769.html', '第一百五十二章 你一直在骗我？'], ['33202309.html', '第一百五十三章 撕破脸皮'], ['33202310.html', '第一百五十四章 我的东西你碰不得'], ['33202311.html', '第一百五十五章 华母的警告'], ['33202672.html', '第一百五十六章 林阳的愤怒'], ['33208531.html', '第一百五十七章 张家还有希望吗？'], ['33208532.html', '第一百五十八章 你以为我不敢？'], ['33208533.html', '第一百五十九章 风玄针诀'], ['33227566.html', '第一百六十章 无人可挡'], ['33227567.html', '第一百六十一章 清账'], ['33227568.html', '第一百六十二章 我刚从开家来'], ['33227700.html', '第一百六十三章 就凭我是林董'], ['33227701.html', '第一百六十四章 孤立无援'], ['33237060.html', '第一百六十五章 住手'], ['33237061.html', '第一百六十六章 你张家怕不怕？'], ['33237062.html', '第一百六十七章 大人物'], ['33237063.html', '第一百六十八章 毕竟他是林神医啊'], ['33243883.html', '第一百六十九章 把财产分了吧'], ['33243884.html', '第一百七十章 请人'], ['33244424.html', '第一百七十一章 变'], ['33244427.html', '第一百七十二章 医王大会'], ['33268875.html', '第一百七十三章 秦凝'], ['33268876.html', '第一百七十四章 你没资格教我'], ['33268877.html', '第一百七十五章 众矢之的'], ['33288379.html', '第一百七十六章 把方子给他们！'], ['33288380.html', '第一百七十七章 你想不嫁都不行了'], ['33288381.html', '第一百七十八章 龙手'], ['33288383.html', '第一百七十九章 遗书'], ['33288742.html', '第一百八十章 滔天怒意'], ['33343103.html', '第一百八十一章 大会开始'], ['33343104.html', '第一百八十二章 我收你'], ['33344644.html', '第一百八十三章 挑战南派'], ['33344645.html', '第一百八十四章 你的行医资格我剥夺了！'], ['33356357.html', '第一百八十五章 你们四个一起上吧'], ['33356358.html', '第一百八十六章 玩命'], ['33356359.html', '第一百八十七章 你到底是谁？'], ['33356360.html', '第一百八十八章 我要你南派鸡犬不宁！'], ['33364497.html', '第一百八十九章 他治不好你们'], ['33364498.html', '第一百九十章 震慑'], ['33364499.html', '第一百九十一章 独战南派'], ['33364500.html', '第一百九十二章 那我就试试'], ['33370880.html', '第一百九十三章 后退'], ['33370881.html', '第一百九十四章 斗针'], ['33370882.html', '第一百九十五章 逃离南派'], ['33370883.html', '第一百九十六章 低头'], ['33376663.html', '第一百九十七章 一成实力'], ['33376664.html', '第一百九十八章 治不好可以来找我'], ['33376665.html', '第一百九十九章 无耻混蛋'], ['33376666.html', '第两百章 你没吃饭吗？'], ['33383417.html', '第两百零一章 一个叫林阳的人'], ['33383418.html', '第两百零二章 洛家的威胁'], ['33383419.html', '第两百零三章 医馆失火'], ['33383420.html', '第两百零四章 世纪豪情中心区'], ['33389238.html', '第两百零五章 人渣'], ['33389239.html', '第两百零六章 一群小偷？'], ['33389240.html', '第两百零七章 兴师问罪'], ['33389241.html', '第两百零八章 这是你们唯一的机会'], ['33399200.html', '第两百零九章 林家的电话'], ['33399201.html', '第两百一十章 你跳下去我就救'], ['33399202.html', '第两百一十一章 这不怪我'], ['33399203.html', '第两百一十二章 你听说过南派吗？'], ['33405637.html', '第两百一十三章 我们老板要见你'], ['33405770.html', '第两百一十四章 那你就惹得起我？'], ['33405771.html', '第两百一十五章 今天要你们消失'], ['33406296.html', '第两百一十六章 南派的能量'], ['33411993.html', '第两百一十七章 我对他没兴趣'], ['33411994.html', '第两百一十八章 救命？'], ['33411995.html', '第两百一十九章 林董您在里面吗？'], ['33411996.html', '第两百二十章 小爷我来了，磕头吧！'], ['33420721.html', '第两百二十一章 恶魔的低吟'], ['33420787.html', '第两百二十二章 十五滴'], ['33420788.html', '第两百二十三章 还击'], ['33420789.html', '第两百二十四章 我成全你们'], ['33427292.html', '第两百二十五章 登门'], ['33427293.html', '第两百二十六章 踢馆'], ['33427294.html', '第两百二十七章 一一清算'], ['33427519.html', '第两百二十八章 这家伙是人吗？'], ['33443808.html', '第两百二十九章 一击'], ['33443809.html', '第两百三十章 他根本不会武功？'], ['33445066.html', '第两百三十一章 医武！'], ['33445067.html', '第两百三十二章 那就让我看看你林家手段！'], ['33448896.html', '第两百三十三章 林家武学'], ['33448897.html', '第两百三十四章 玄参王'], ['33448898.html', '第两百三十五章 林家的把柄'], ['33462860.html', '第两百三十六章 报复来临'], ['33462861.html', '第两百三十七章 林家来电'], ['33462862.html', '第两百三十八章 中医都是骗人的把戏？'], ['33462893.html', '第两百三十九章 驱逐'], ['33482425.html', '第两百四十章 安娜会长的老师'], ['33482426.html', '第两百四十一章 低头'], ['33482427.html', '第两百四十二章 抢救'], ['33482428.html', '第两百四十三章 林阳的干妈'], ['33483028.html', '第两百四十四章 你是不是叫林阳？'], ['33489031.html', '第两百四十五章 姨母？'], ['33489404.html', '第两百四十六章 崇宗教'], ['33489405.html', '第两百四十七章 一拳下去他得休克'], ['33489406.html', '第两百四十八章 对不起我拒绝'], ['33497787.html', '第两百四十九章 看看你们的嘴脸'], ['33497788.html', '第两百五十章 把她拖过去'], ['33497789.html', '第两百五十一章 我一定会杀了你'], ['33507619.html', '第两百五十二章 切磋切磋'], ['33507620.html', '第两百五十三章 谁说我是孬种？'], ['33507621.html', '第两百五十四章 可我不是尚武馆的人啊'], ['33507622.html', '第两百五十五章 多希望是在做梦'], ['33512472.html', '第两百五十六章 愚蠢透顶？'], ['33512473.html', '第两百五十七章 该死'], ['33512947.html', '第两百五十八章 剑王'], ['33512948.html', '第两百五十九章 登门'], ['33512949.html', '第两百六十章 谁是教主？'], ['33521174.html', '第两百六十一章 我给你们十秒钟'], ['33521175.html', '第两百六十二章 江城林神医'], ['33521176.html', '第两百六十三章 你能对我怎样？'], ['33529370.html', '第两百六十四章 不得公道，便踏平！'], ['33529371.html', '第两百六十五章 敌'], ['33529372.html', '第两百六十六章 楚长老'], ['33529373.html', '第两百六十七章 你就这点手段？'], ['33539633.html', '第两百六十八章 无效'], ['33539634.html', '第两百六十九章 你还没有资格制裁我'], ['33540044.html', '第两百七十章 下风'], ['33540045.html', '第两百七十一章 天骄'], ['33543878.html', '第两百七十二章 我不喜欢帮废物'], ['33543879.html', '第两百七十三章 你不配'], ['33543880.html', '第两百七十四章 该结束了'], ['33545936.html', '第两百七十五章 看走眼'], ['33553788.html', '第两百七十六章 摆你一道'], ['33553789.html', '第两百七十七章 不跑，正确！'], ['33553790.html', '第两百七十八章 我赌你枪里没有子弹'], ['33559441.html', '第两百七十九章 我替你杀'], ['33559442.html', '第两百八十章 看看谁的能量大'], ['33559443.html', '第两百八十一章 你来晚了'], ['33559444.html', '第两百八十二章 你去山上看一看吧'], ['33566575.html', '第两百八十三章 死哪去了？'], ['33566576.html', '第两百八十四章 林家给予的抉择'], ['33566577.html', '第两百八十五章 给我一年时间'], ['33566578.html', '第两百八十六章 滚！'], ['33573322.html', '第两百八十七章 你确定你不会后悔？'], ['33573323.html', '第两百八十八章 慢慢玩'], ['33573324.html', '第两百八十九章 因为我就是林董'], ['33581075.html', '第两百九十章 你不想返回林家？'], ['33581076.html', '第两百九十一章 宣战'], ['33581077.html', '第两百九十二章 鉴药大赛'], ['33581078.html', '第两百九十三章 冒名顶替'], ['33581079.html', '第两百九十四章 十大天才'], ['33585933.html', '第两百九十五章 你等着被开除吧'], ['33585991.html', '第两百九十六章 我想问个问题'], ['33586071.html', '第两百九十七章 此地无银'], ['33593821.html', '第两百九十八章 不得太平'], ['33593822.html', '第两百九十九章 第一轮鉴药'], ['33593823.html', '第三百章 这是假药'], ['33599173.html', '第三百零一章 唐讲师的震愕'], ['33599174.html', '第三百零二章 谁是128号？'], ['33599954.html', '第三百零三章 千古难题'], ['33606480.html', '第三百零四章 讨价还价'], ['33607056.html', '第三百零五章 开始！结束了？'], ['33607057.html', '第三百零六章 内定？'], ['33612883.html', '第三百零七章 劝说妥协'], ['33612884.html', '第三百零八章 那我们比一比怎样？'], ['33613255.html', '第三百零九章 激将'], ['33613256.html', '第三百一十章 你做出了一个错误的决定'], ['33617169.html', '第三百一十一章 再加！'], ['33617509.html', '第三百一十二章 太无聊了'], ['33617510.html', '第三百一十三章 大赛第一'], ['33628306.html', '第三百一十四章 撕破脸皮'], ['33628307.html', '第三百一十五章 得看你有没有资格'], ['33628308.html', '第三百一十六章 你到底是谁'], ['33644018.html', '第三百一十七章 碾压'], ['33644252.html', '第三百一十八章 惊天一拳'], ['33649124.html', '第三百一十九章 房主的怒火'], ['33649125.html', '第三百二十章 活要见人死要见尸'], ['33649126.html', '第三百二十一章 张晴雨的邀请'], ['33649234.html', '第三百二十二章 老同学'], ['33654963.html', '第三百二十三章 我女婿比你强一百倍'], ['33654964.html', '第三百二十四章 他说的是真的'], ['33654965.html', '第三百二十五章 这是山寨货'], ['33654966.html', '第三百二十六章 这不是山寨'], ['33659168.html', '第三百二十七章 十辆兰博尼基'], ['33659169.html', '第三百二十八章 贝尔429直升机'], ['33659290.html', '第三百二十九章 你是正版的'], ['33671268.html', '第三百三十章 傻眼'], ['33671269.html', '第三百三十一章 什么时候离婚'], ['33671393.html', '第三百三十二章 重要的客人'], ['33685317.html', '第三百三十三章 三十万'], ['33685458.html', '第三百三十四章 擦鞋'], ['33685459.html', '第三百三十五章 这个项目中止不了'], ['33690019.html', '第三百三十六章 巴掌'], ['33690020.html', '第三百三十七章 你站哪边？'], ['33690132.html', '第三百三十八章 林董的妻子'], ['33695514.html', '第三百三十九章 林阳就是林董！'], ['33695515.html', '第三百四十章 内幕'], ['33695516.html', '第三百四十一章 林家的剑'], ['33702961.html', '第三百四十二章 等他们上门'], ['33702962.html', '第三百四十三章 反将你一军'], ['33702963.html', '第三百四十四章 大家都是聪明人'], ['33708313.html', '第三百四十五章 你发火是什么样子'], ['33708314.html', '第三百四十六章 没有药引？'], ['33708315.html', '这三百四十七章 林家，深陷泥潭！'], ['33723715.html', '第三百四十八章 利息'], ['33723716.html', '第三百四十九章 天亡'], ['33723832.html', '第三百五十章 天神下凡'], ['33739750.html', '第三百五十一章 看你自己的本事'], ['33739752.html', '第三百五十二章 霸道'], ['33739753.html', '第三百五十三章 将林家踩在脚底'], ['33744766.html', '第三百五十四章 声势滔天'], ['33744852.html', '第三百五十五章 来一个我救一个'], ['33744853.html', '第三百五十六章 是你？'], ['33754105.html', '第三百五十七章 新药不完善'], ['33754198.html', '第三百五十八章 混乱'], ['33754199.html', '第三百五十九章 这不可能'], ['33759539.html', '第三百六十章 都是假的'], ['33759639.html', '第三百六十一章 我不想死'], ['33759640.html', '第三百六十二章 一飞冲天'], ['33765675.html', '第三百六十三章 一发不可收拾'], ['33765676.html', '第三百六十四章 试一试吧'], ['33765677.html', '第三百六十五章 救世主'], ['33771540.html', '第三百六十六章 奇耻大辱'], ['33771945.html', '第三百六十七章 嚣张的司机'], ['33771946.html', '第三百六十八章 让他们等我！'], ['33777765.html', '第三百六十九章 你确定？'], ['33777878.html', '第三百七十章 谁让你们走的？'], ['33777879.html', '第三百七十一章 有没有资格'], ['33783123.html', '第三百七十二章 我开玩笑的'], ['33783124.html', '第三百七十三章 林阳的妹妹'], ['33783125.html', '第三百七十四章 林家会求我的'], ['33788585.html', '第三百七十五章 饭局'], ['33788586.html', '第三百七十六章 一招妙棋'], ['33788587.html', '第三百七十七章 赴约'], ['33792175.html', '第三百七十八章 黑暗中的演奏者'], ['33792176.html', '第三百七十九章 因为这是我欠你的'], ['33792302.html', '第三百八十章 警告'], ['33798625.html', '第三百八十一章 撇清关系'], ['33798626.html', '第三百八十二章 奇药房来人'], ['33798627.html', '第三百八十三章 可如果你们输了呢？'], ['33804269.html', '第三百八十四章 柳如诗出事'], ['33804270.html', '第三百八十五章 你不说，我杀上去'], ['33804959.html', '第三百八十六章 前往应家'], ['33813390.html', '第三百八十七章 和平？'], ['33813391.html', '第三百八十八章 我太天真了！'], ['33813392.html', '第三百八十九章 我给你最后一次机会'], ['33821684.html', '第三百九十章 我不信'], ['33821685.html', '第三百九十一章 还要我重复一遍？'], ['33821686.html', '第三百九十二章 就凭你们？'], ['33830018.html', '第三百九十三章 你们根本不懂中医'], ['33830019.html', '第三百九十四章 龙剑队'], ['33830020.html', '第三百九十五章 一针断剑'], ['33836185.html', '第三百九十六章 战神'], ['33836186.html', '第三百九十七章 开外音'], ['33836187.html', '第三百九十八章 大佛自己会过来'], ['33844678.html', '第三百九十九章 杀人诛心'], ['33844679.html', '第四百章 俯首称臣'], ['33844680.html', '第四百零一章 我要你当众自尽'], ['33852084.html', '第四百零二章 你可以认真了'], ['33852085.html', '第四百零三章 真正实力'], ['33852532.html', '第四百零四章 彻底碾压'], ['33857447.html', '第四百零五章 这次我们要吃大亏了'], ['33857448.html', '第四百零六章 底线'], ['33857449.html', '第四百零七章 你想灭了我应家？'], ['33862354.html', '第四百零八章 让你十招'], ['33862617.html', '第四百零九章 不过如此'], ['33862618.html', '第四百零十章 你输了'], ['33868082.html', '第四百一十一章 心悦诚服'], ['33868083.html', '第四百一十二章 这里发生了什么？'], ['33868084.html', '第四百一十三章 干妈出事'], ['33872279.html', '第四百一十四章 肉痛的苏颜'], ['33872280.html', '第四百一十五章 梁秋燕'], ['33872446.html', '第四百一十六章 你还没有回答我的问题'], ['33878561.html', '第四百一十七章 梁家的隐情'], ['33878562.html', '第四百一十八章 救治'], ['33878621.html', '第四百一十九章 走投无路'], ['33888233.html', '第四百二十章 都滚开'], ['33908840.html', '第四百二十一章 孤立无援'], ['33909042.html', '第四百二十二章 你算什么东西'], ['33909043.html', '第四百二十三章 死有余辜？'], ['33913837.html', '第四百二十四章 暴怒'], ['33913838.html', '第四百二十五章 兵王保镖'], ['33913839.html', '第四百二十六章 上门算账'], ['33919167.html', '第四百二十七章 独闯'], ['33919168.html', '第四百二十八章 男儿有泪不轻弹'], ['33919169.html', '第四百二十九章 我会让他们低头的'], ['33923888.html', '第四百三十章 给我点时间'], ['33923889.html', '第四百三十一章 鸡犬不宁'], ['33923890.html', '第四百三十二章 你们爽约了'], ['33929018.html', '第四百三十三章 这个头不低'], ['33929019.html', '第四百三十四章 没把我放在眼里？'], ['33929020.html', '第四百三十五章 我想回家'], ['33934809.html', '第四百三十六章 梁家算什么？'], ['33934810.html', '第四百三十七章 后果自负'], ['33934811.html', '第四百三十八章 我只是个路人'], ['33940885.html', '第四百三十九章 我喜欢林神医'], ['33940936.html', '第四百四十章 赔礼道歉'], ['33940937.html', '第四百四十一章 你们办不到的事'], ['33955094.html', '第四百四十二章 夜闯梁家'], ['33955095.html', '第四百四十三章 我给你五分钟'], ['33955300.html', '第四百四十四章 斩指'], ['33967481.html', '第四百四十五章 我自己能够解决'], ['33967482.html', '第四百四十六章 剑拔弩张'], ['33970125.html', '第四百四十七章 你，滚去道歉'], ['33987495.html', '第四百四十八章 低头'], ['33987496.html', '第四百四十九章 玄医派出事'], ['33987497.html', '第四百五十章 龙手之死'], ['34001678.html', '第四百五十一章 毒'], ['34001679.html', '第四百五十二章 上门'], ['34001680.html', '第四百五十三章 我会让奇药房消失'], ['34007155.html', '第四百五十四章 开始报复'], ['34007156.html', '第四百五十五章 疯狂打击'], ['34007324.html', '第四百五十六章 这是我妻子'], ['34012735.html', '第四百五十七章 找茬？'], ['34012736.html', '第四百五十八章 你要保下这人？'], ['34012737.html', '第四百五十九章 丢他出去'], ['34018947.html', '第四百六十章 可你是我老婆！'], ['34018948.html', '第四百六十一章 前提是离婚'], ['34018949.html', '第四百六十二章 你说她叫苏颜？'], ['34022955.html', '第四百六十三章 恼羞成怒'], ['34022956.html', '第四百六十四章 我妻子是被谁打的？'], ['34022957.html', '第四百六十五章 你的态度呢？'], ['34028364.html', '第四百六十六章 你只能这么做'], ['34028673.html', '第四百六十七章 清场'], ['34028674.html', '第四百六十八章 我老婆还在等我呢'], ['34039011.html', '第四百六十九章 突然求饶'], ['34039012.html', '第四百七十章 掉以轻心'], ['34039013.html', '第四百七十一章 废朔方'], ['34044476.html', '第四百七十二章 伤痕'], ['34044477.html', '第四百七十三章 奇药房的报复'], ['34044590.html', '第四百七十四章 林神医来了'], ['34052057.html', '第四百七十五章 再下血书'], ['34052155.html', '第四百七十六章 我赌你的一切'], ['34052408.html', '第四百七十七章 不过如此'], ['34056428.html', '第四百七十八章 看看我的毒吧'], ['34056429.html', '第四百七十九章 你输了'], ['34056430.html', '第四百八十章 你们新的房主是我！']]
    # data = [['33080506.html', '第一章 我不想再当废物了'], ['33080507.html', '第二章 她活不过十二点']]
    server = 'https://www.xbiquge.cc/book/51362/'
    with open('D:/a.txt', 'w+', encoding='utf-8') as f:
        for i in data:
            start = datetime.datetime.now()
            url = f"{server}{i[0]}"
            con = fetch_html(url=url)
            con = etree.HTML(con)
            content = con.xpath("//div[@id='box_con']/div[@id='content']")
            strs = [i.xpath("string(.)") for i in content]
            print(f"获取{i[1]}-用时{(datetime.datetime.now()-start)/1000}秒")
            f.write(f"{i[1]}\n"+"\n".join(strs))
